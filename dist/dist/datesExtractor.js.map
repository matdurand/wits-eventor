{"version":3,"sources":["../datesExtractor.js"],"names":["Object","defineProperty","exports","value","_typeof","Symbol","iterator","obj","constructor","prototype","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","_classCallCheck","instance","TypeError","DateExtractor","chrono","require","extractDatesFromText","text","results","parse","_ret","extractedDates","originalText","textWithoutDatesKeywords","usedLanguage","getTextLanguageFromResult","forEach","result","push","extractDateFromResult","extractDatesKeyWordFromText","v","name","tags","languageCode","substring","toLowerCase","extractedDate","ref","dateTextExtracted","dateTextExtractedIndex","index","replace"],"mappings":"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","file":"datesExtractor.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n//Outputs\n/*\n * {\n *   originalText,\n *   textWithoutDatesKeywords,\n *   extractedDate : [\n *       {\n *           dateTextExtractedIndex : (position dans l'orginialText),\n *           dateTextExtracted : 'blbabla'\n *           value : La date javascript\n *       },\n *       {\n *\n *       }\n *   ],\n *   usedLanguage (ex : 'fr', 'en')\n * }\n *\n * */\n\nvar DateExtractor = exports.DateExtractor = function () {\n    function DateExtractor() {\n        _classCallCheck(this, DateExtractor);\n\n        this.chrono = require('chrono-node');\n    }\n\n    _createClass(DateExtractor, [{\n        key: 'extractDatesFromText',\n        value: function extractDatesFromText(text) {\n            var results = this.chrono.parse(text);\n            if (results.length > 0) {\n                var _ret = function () {\n                    var extractedDates = [];\n                    var originalText = text;\n                    var textWithoutDatesKeywords = text;\n                    var usedLanguage = getTextLanguageFromResult(results[0]);\n\n                    results.forEach(function (result) {\n                        extractedDates.push(extractDateFromResult(result));\n                        textWithoutDatesKeywords = extractDatesKeyWordFromText(textWithoutDatesKeywords, result);\n                    });\n\n                    return {\n                        v: {\n                            originalText: originalText,\n                            textWithoutDatesKeywords: textWithoutDatesKeywords,\n                            extractedDates: extractedDates,\n                            usedLanguage: usedLanguage\n                        }\n                    };\n                }();\n\n                if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n            }\n        }\n    }]);\n\n    return DateExtractor;\n}();\n\nfunction getTextLanguageFromResult(result) {\n    for (var name in result.tags) {\n        var languageCode = name.substring(0, 2);\n        return languageCode.toLowerCase();\n    }\n}\n\nfunction extractDateFromResult(result) {\n    var extractedDate = {};\n    extractedDate.value = result.ref;\n    extractedDate.dateTextExtracted = result.text;\n    extractedDate.dateTextExtractedIndex = result.index;\n    return extractedDate;\n}\n\nfunction extractDatesKeyWordFromText(textWithoutDatesKeywords, result) {\n    return textWithoutDatesKeywords.replace(result.text, '');\n}"]}